<% unless @invitees.empty? %>
  <table>
    <thead>
      <tr>
        <th class="invitee-name">Name</th>
        <th class="invitee-relation">Relation</th>
        <th class="invitee-guest">Guest(s)</th>
        <th><p class="invitee-email">Email</p></th>
        <th class="invitee-number-response">Number response</th>
        <th class="invitee-ceremonial-response">Ceremonial</th>
        <th class="invitee-reception-response">Reception</th>
        <% if current_user.has_role_for_event?("admin", @event) %>
          <th colspan="3"></th>
        <% elsif current_user.has_role_for_event?("receptionist", @event) %>
          <th></th>
        <% end %>
      </tr>
    </thead>

    <tbody>
      <% has_admin_role = current_user.has_role_for_event?("admin", @event) %>
      <% has_receptionist_role = current_user.has_role_for_event?("receptionist", @event) %>
      <% @invitees.each do |invitee| %>
        <tr>
          <td class="invitee-name">
            <% if has_admin_role %>
              <%= link_to invitee.name, "#", "data-reveal-id": "invitee-#{ invitee.id }-modal" %>
            <% else %>
              <%= link_to invitee.name, invitee_path(invitee) %>
            <% end %>
          </td>
          <td class="invitee-relation"><%= invitee.relation %></td>
          <td class="invitee-guest"><%= invitee.number %></td>
          <td><p class="invitee-email"><%= invitee.email %></p></td>
          <td class="invitee-number-response">
            <% if invitee.number_response.nil? %>
              <i class="fa fa-question" aria-hidden="true"></i>
            <% else %>
              <%= invitee.number_response %>
            <% end %>
          </td>

          <td class="invitee-ceremonial-response">
            <% unless invitee.ceremonial_response.nil? %>
              <% if invitee.ceremonial_response === true %>
                <i class="fa fa-check" aria-hidden="true"></i>
              <% else %>
                <i class="fa fa-times" aria-hidden="true"></i>
              <% end %>
            <% else %>
              <i class="fa fa-question" aria-hidden="true"></i>
            <% end %>
          </td>

          <td class="invitee-reception-response">
            <% unless invitee.reception_response.nil? %>
              <% if invitee.reception_response === true %>
                <i class="fa fa-check" aria-hidden="true"></i>
              <% else %>
                <i class="fa fa-times" aria-hidden="true"></i>
              <% end %>
            <% else %>
              <i class="fa fa-question" aria-hidden="true"></i>
            <% end %>
          </td>

          <% if has_admin_role %>
            <td class="invitation-status">
              <% if invitee.number_response.present? %>
                invitee already response
              <% else %>
                <%= link_to 'Edit', edit_invitee_path(invitee) %>
              <% end %>
            </td>
            <td class="invitation-resend"><%= link_to 'Resend', invitees_resend_invitation_invitee_path(invitee) %></td>
          <% elsif has_receptionist_role %>
            <% if invitee.number_arrival.nil? %>
              <td class="invitation-status">-
                <%#= link_to 'Update Arrival', '#', class: 'update-arrival', "data-invitee-id": invitee.id %>
              </td>
            <% else %>
              <th class="invitation-status">Updated (<%= invitee.number_arrival %>)</th>
            <% end %>
          <% end %>
        </tr>

        <% if has_admin_role %>
          <div id="invitee-<%= invitee.id %>-modal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
            <h2 id="modalTitle"><%= invitee.name %></h2>
            <p>
              <strong>Relation:</strong>
              <%= invitee.relation %>
            </p>

            <p>
              <strong>Guest(s):</strong>
              <%= invitee.number %>
            </p>

            <p>
              <strong>Email:</strong>
              <%= invitee.email %>
            </p>

            <p>
              <strong>Address:</strong>
              <%= invitee.address %>
            </p>

            <p>
              <strong>Phone:</strong>
              <%= invitee.phone %>
            </p>

            <p>
              <strong>Ceremonial Response:</strong>
              <%= invitee.ceremonial_response %>
            </p>

            <p>
              <strong>Reception Response:</strong>
              <%= invitee.reception_response %>
            </p>
            <a class="close-reveal-modal" aria-label="Close">&#215;</a>
          </div><!-- .reveal-modal -->
        <% end %>
      <% end %>
    </tbody>
  </table>
<% else %>
  No invitee(s) found
<% end %>
